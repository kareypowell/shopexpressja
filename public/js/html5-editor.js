(()=>{function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function n(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,r(o.key),o)}}function r(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var o=t[Symbol.toPrimitive];if(void 0!==o){var r=o.call(t,n||"default");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}var i=function(){return e=function e(o){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.selector=o,this.element=document.querySelector(o),this.options=function(e){for(var o=1;o<arguments.length;o++){var r=null!=arguments[o]?arguments[o]:{};o%2?t(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({height:400,placeholders:[],onChange:null,onKeyup:null,onInit:null},r),this.editor=null,this.toolbar=null,this.placeholderDropdown=null,this.init()},r=[{key:"init",value:function(){this.element?(this.createEditor(),this.createToolbar(),this.setupEventListeners(),this.options.onInit&&this.options.onInit(this)):console.error("HTML5Editor: Element not found for selector:",this.selector)}},{key:"createEditor",value:function(){this.element.style.display="none";var e=document.createElement("div");e.className="html5-editor-container border border-gray-300 rounded-md overflow-hidden",this.toolbar=document.createElement("div"),this.toolbar.className="html5-editor-toolbar bg-gray-50 border-b border-gray-300 p-2 flex flex-wrap gap-1",this.editor=document.createElement("div"),this.editor.className="html5-editor-content p-3 focus:outline-none",this.editor.contentEditable=!0,this.editor.style.minHeight=this.options.height+"px",this.editor.style.maxHeight="600px",this.editor.style.overflowY="auto",this.editor.innerHTML=this.element.value||"",e.appendChild(this.toolbar),e.appendChild(this.editor),this.element.parentNode.insertBefore(e,this.element.nextSibling)}},{key:"createToolbar",value:function(){var e=this;if([{command:"bold",icon:"B",title:"Bold",className:"font-bold"},{command:"italic",icon:"I",title:"Italic",className:"italic"},{command:"underline",icon:"U",title:"Underline",className:"underline"},{type:"separator"},{command:"justifyLeft",icon:"⬅",title:"Align Left"},{command:"justifyCenter",icon:"⬌",title:"Align Center"},{command:"justifyRight",icon:"➡",title:"Align Right"},{type:"separator"},{command:"insertUnorderedList",icon:"• List",title:"Bullet List"},{command:"insertOrderedList",icon:"1. List",title:"Numbered List"},{type:"separator"},{command:"removeFormat",icon:"✗",title:"Remove Formatting"}].forEach((function(t){if("separator"===t.type){var n=document.createElement("div");n.className="w-px bg-gray-300 mx-1",e.toolbar.appendChild(n)}else{var o=e.createToolbarButton(t);e.toolbar.appendChild(o)}})),this.options.placeholders&&this.options.placeholders.length>0){var t=document.createElement("div");t.className="w-px bg-gray-300 mx-1",this.toolbar.appendChild(t),this.createPlaceholderDropdown()}}},{key:"createToolbarButton",value:function(e){var t=this,n=document.createElement("button");return n.type="button",n.className="html5-editor-btn px-2 py-1 text-sm border border-gray-300 rounded hover:bg-gray-100 focus:outline-none focus:ring-1 focus:ring-indigo-500 ".concat(e.className||""),n.innerHTML=e.icon,n.title=e.title,n.addEventListener("click",(function(n){n.preventDefault(),t.execCommand(e.command)})),n}},{key:"createPlaceholderDropdown",value:function(){var e=this,t=document.createElement("div");t.className="relative inline-block";var n=document.createElement("button");n.type="button",n.className="html5-editor-btn px-3 py-1 text-sm border border-gray-300 rounded hover:bg-gray-100 focus:outline-none focus:ring-1 focus:ring-indigo-500 flex items-center gap-1",n.innerHTML='Placeholders <span class="text-xs">▼</span>';var o=document.createElement("div");o.className="absolute top-full left-0 mt-1 w-64 bg-white border border-gray-300 rounded-md shadow-lg z-50 hidden",o.style.maxHeight="200px",o.style.overflowY="auto",this.options.placeholders.forEach((function(t){var n=document.createElement("button");n.type="button",n.className="w-full text-left px-3 py-2 text-sm hover:bg-gray-100 border-b border-gray-100 last:border-b-0",n.innerHTML='\n                <div class="font-medium text-gray-900">'.concat(t.text,'</div>\n                <div class="text-xs text-gray-500">').concat(t.description||"","</div>\n            "),n.addEventListener("click",(function(n){n.preventDefault(),e.insertPlaceholder(t.value),o.classList.add("hidden")})),o.appendChild(n)})),n.addEventListener("click",(function(e){e.preventDefault(),o.classList.toggle("hidden")})),document.addEventListener("click",(function(e){t.contains(e.target)||o.classList.add("hidden")})),t.appendChild(n),t.appendChild(o),this.toolbar.appendChild(t),this.placeholderDropdown=o}},{key:"execCommand",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.editor.focus(),document.execCommand(e,!1,t),this.updateTextarea()}},{key:"insertPlaceholder",value:function(e){this.editor.focus();var t=window.getSelection(),n=t.getRangeAt(0),o=document.createElement("span");o.className="placeholder bg-blue-100 text-blue-800 px-1 py-0.5 rounded text-sm font-medium",o.textContent=e,o.contentEditable=!1,n.deleteContents(),n.insertNode(o),n.setStartAfter(o),n.setEndAfter(o),t.removeAllRanges(),t.addRange(n),this.updateTextarea()}},{key:"setupEventListeners",value:function(){var e=this;this.editor.addEventListener("input",(function(){e.updateTextarea(),e.options.onChange&&e.options.onChange(e.getContent())})),this.editor.addEventListener("keyup",(function(){e.updateTextarea(),e.options.onKeyup&&e.options.onKeyup(e.getContent())})),this.editor.addEventListener("keydown",(function(t){"@"===t.key&&e.options.placeholders&&e.options.placeholders.length>0&&(t.preventDefault(),e.showPlaceholderSuggestions())})),this.editor.addEventListener("keydown",(function(t){var n=window.getSelection();if(n.rangeCount>0){var o=n.getRangeAt(0).commonAncestorContainer,r=o.nodeType===Node.TEXT_NODE?o.parentElement:o;r&&r.classList&&r.classList.contains("placeholder")&&("Enter"!==t.key&&"Backspace"!==t.key&&"Delete"!==t.key||(t.preventDefault(),"Backspace"!==t.key&&"Delete"!==t.key||(r.remove(),e.updateTextarea())))}}))}},{key:"showPlaceholderSuggestions",value:function(){this.placeholderDropdown&&this.placeholderDropdown.classList.remove("hidden")}},{key:"updateTextarea",value:function(){this.element.value=this.getContent();var e=new Event("change",{bubbles:!0});this.element.dispatchEvent(e)}},{key:"getContent",value:function(){return this.editor.innerHTML}},{key:"setContent",value:function(e){this.editor.innerHTML=e||"",this.updateTextarea()}},{key:"destroy",value:function(){this.editor&&this.editor.parentNode&&(this.editor.parentNode.remove(),this.element.style.display="")}}],r&&o(e.prototype,r),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,i}();window.HTML5Editor=i})();
//# sourceMappingURL=html5-editor.js.map